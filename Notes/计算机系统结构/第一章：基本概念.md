# 1.1 层次概念

---

# 1.2 定量分析技术基础

## 三条基本原则

1. 大概率事件优先原则：对于大概率事件（最常见的事件），赋予它优先的处理权和资源使用权，以获得全局的最优结果。
2. Amdahl 定律：加快某部件执行速度所获得的系统性能加速比，受限于该部件在系统中所占的重要性。
3. 程序局部性原理：程序在执行时所访问地址的分布不是随机的，而是相对地簇聚
   - 时间局部性
   - 空间局部性

## Amdahl 定律

### 加速比定义

**加速比 = 系统性能~改进后~ / 系统性能~改进前~ = 总执行时间~改进前~ / 总执行时间~改进后~**

系统加速比依赖于两个因素

- 可改进比例 Fe = 可改进部分时间 / 改进前整个任务的时间
- 部件加速比 Se = 改进前改进部分的时间 / 改进后改进部分的时间

引入这两个因素后：

**总执行时间~改进后~ = 不可改进部分时间 + 可改进部分时间**

**= (1 - 可改进比例) x 总执行时间~改进前~ + (可改进比例 x 总执行时间~改进前~) / 部件加速比**

**系统加速比 = 1 / ((1-可改进比例) + 可改进比例 / 部件加速比)**

最终整个任务的执行时间 **T~n~ = T~o~ x (1 - *Fe* + *Fe* / *Se*)**

### 性能递减规则

如果仅仅对计算机中的一部分做性能改进，则改进越多，系统获得的效果越小。

推论：如果只针对整个任务的一部分进行优化，那么所获得的加速比不大于 **1/(1 - Fe)**。

## CPU性能指标

### CPU时间与CPI

- CPU时间=总周期数/时间频率
- CPI（Cycles Per Instruction）= 总时钟周期数 / IC（一个程序的指令数）

总CPU时间可以写成 CPI x IC / 时钟频率 = CPI x IC x CT（Cycle Time）

- CPI：反映计算机实现技术、指令集结构和计算机组织
- IC：指令集结构和编译技术
- CT/频率：实现技术和工艺

### MIPS（Million Instructions Per Second）

MIPS = 指令数 / (执行时间 x 10^6^) = 指令数 / (CPU时钟周期数 x 10^6^ / f)  

= f / (CPI x 10^6^)