---
title: 进程同步
date: 2022-10-17 14:51
---
# 信号灯机制
信号灯(semaphore)由一个确定的二元组`(s, q)`组成，其中 s 一定是**非负初值**的整形变量，q 是一个初值为空的队列。
- 当 s>=0 时， 表示绿灯，进程可以继续推进
- 当 s<＝0 时，表示红灯，进程被阻塞
## 信号灯操作
- P 操作: 一个不可分割的原语
    - 信号灯值 s-1
    - 若相减结果为负，则调用 P 操作的进程受阻，并插入等待队列
    - 若相减结果非负，则进程继续执行
- V 操作: 一个不可分割的原语
    - s 值+1
    - 若相加结果大于 0，则进程继续执行 (代表队列为 0，没有进程在等待这个资源)
    - 若相加结果小于等于 0，则从等待队列中移出一个进程，解除它的等待状态，然后返回本进程继续执行
